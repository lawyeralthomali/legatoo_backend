# ๐ ุชู ุฅูุฌุงุฒ ูุธุงู ุฑูุน ููุนุงูุฌุฉ ุงููุซุงุฆู ุงููุงููููุฉ ูุน ุฏุนู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุฒุฏูุฌุฉ

## โ ูุง ุชู ุฅูุฌุงุฒู

### 1. **ุชุทููุฑ ูุธุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุฒุฏูุฌุฉ**
- **VectorstoreManager (Singleton)**: ุฅุฏุงุฑุฉ ููุญุฏุฉ ููู embeddings ู Chroma
- **DualDatabaseManager**: ุชุฒุงูู ูุงูู ุจูู SQL ู Chroma
- **ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุชูุฏูุฉ**: rollback ุชููุงุฆู ุนูุฏ ุงููุดู

### 2. **ุชุญุฏูุซ ุงููููุงุช ุงูุฃุณุงุณูุฉ**

#### `app/services/document_parser_service.py` (ูุญุฏุซ ุจุงููุงูู)
```python
# ุงูููููุงุช ุงูุฌุฏูุฏุฉ:
- VectorstoreManager: Singleton ููู embeddings ู Chroma
- DualDatabaseManager: ุฅุฏุงุฑุฉ ุงูุนูููุงุช ุงููุชุฒุงููุฉ
- LegalDocumentParser: ูุญุฏุซ ูุฏุนู ุงููุธุงู ุงููุฒุฏูุฌ
- DocumentUploadService: ูุญุฏุซ ูุน ูุธุงุฆู ุฅุฏุงุฑุฉ ุดุงููุฉ
```

#### `app/routes/document_upload_router.py` (endpoints ุฌุฏูุฏุฉ)
```python
# ุงูู endpoints ุงูุฌุฏูุฏุฉ:
- GET /api/v1/documents/database/status
- POST /api/v1/documents/database/sync
- PUT /api/v1/documents/chunks/{chunk_id}
- DELETE /api/v1/documents/chunks/{chunk_id}
- DELETE /api/v1/documents/documents/{document_id}
```

### 3. **ุงูููุฒุงุช ุงูููุฌุฒุฉ**

#### ๐ **ุงูุชุฒุงูู ุงููุงูู**
- ูู chunk ููุญูุธ ูู SQL ู Chroma ูุนูุง
- metadata ุดุงูู ูู Chroma ูุน ุฌููุน ุงููุฑุงุฌุน
- rollback ุชููุงุฆู ุนูุฏ ูุดู ุฃู ุนูููุฉ

#### ๐ฏ **Singleton Pattern**
- ููุน ุชูุฑุงุฑ ุงูููุงุฐุฌ
- ุชุญุณูู ุงูุฃุฏุงุก ูุงูุฐุงูุฑุฉ
- ุฅุฏุงุฑุฉ ููุญุฏุฉ ููููููุงุช

#### ๐ก๏ธ **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**
- rollback ุชููุงุฆู ููู SQL ุนูุฏ ูุดู Chroma
- ุณุฌูุงุช ููุตูุฉ ูุฌููุน ุงูุนูููุงุช
- ุงุณุชุซูุงุกุงุช ูุงุถุญุฉ ููููุฏุฉ

#### ๐ง **ุงููุฑููุฉ ูู ุงูุฅุฏุงุฑุฉ**
- ุญุฐู ูุฑู ููู chunks ูุงููุซุงุฆู
- ุชุญุฏูุซ ูุญุชูู ุงูู chunks
- ูุฒุงููุฉ ูุฏููุฉ ูููุธุงููู
- ูุญุต ุญุงูุฉ ุงููุธุงููู

### 4. **Metadata ูุญุณู ูู Chroma**
```json
{
  "document_id": 123,
  "chunk_id": 456,
  "chunk_index": 0,
  "tokens_count": 150,
  "law_source_id": 789,
  "article_id": 101,
  "article_number": "ุงููุงุฏุฉ 1",
  "law_name": "ูุธุงู ุงูุนูู",
  "jurisdiction": "ุงูููููุฉ ุงูุนุฑุจูุฉ ุงูุณุนูุฏูุฉ",
  "issuing_authority": "ููู ุงูููููุฉ ุงูุนุฑุจูุฉ ุงูุณุนูุฏูุฉ",
  "document_title": "ูุธุงู ุงูุนูู ุงูุณุนูุฏู",
  "document_category": "law"
}
```

### 5. **ุงููููุงุช ุงููุณุงูุฏุฉ**

#### `DUAL_DATABASE_SYSTEM_README.md`
- ุชูุซูู ุดุงูู ูููุธุงู ุงูุฌุฏูุฏ
- ุดุฑุญ ุฌููุน ุงูููุฒุงุช ูุงููุธุงุฆู
- ุฃูุซูุฉ ุนูู ุงูุงุณุชุฎุฏุงู
- ุฏููู ุงูุชุทููุฑ ุงููุณุชูุจูู

#### `test_dual_database_system.py`
- ุงุฎุชุจุงุฑุงุช ุดุงููุฉ ูููุธุงู ุงูุฌุฏูุฏ
- ุงุฎุชุจุงุฑ Singleton Pattern
- ุงุฎุชุจุงุฑ ุงูุชุฒุงูู ุจูู ุงููุธุงููู
- ุงุฎุชุจุงุฑ API endpoints

#### `check_requirements.py`
- ูุญุต ุงูุญุฒู ุงููุทููุจุฉ
- ูุญุต ูุชุบูุฑุงุช ุงูุจูุฆุฉ
- ุฏููู ุงูุชุซุจูุช

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. **ุฑูุน ูุซููุฉ ุฌุฏูุฏุฉ**
```bash
curl -X POST "http://localhost:8000/api/v1/documents/upload" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -F "file=@document.json" \
  -F "title=ูุธุงู ุงูุนูู" \
  -F "category=law"
```

### 2. **ูุญุต ุญุงูุฉ ุงููุธุงููู**
```bash
curl -X GET "http://localhost:8000/api/v1/documents/database/status"
```

### 3. **ูุฒุงููุฉ ุงููุธุงููู**
```bash
curl -X POST "http://localhost:8000/api/v1/documents/database/sync"
```

### 4. **ุชุญุฏูุซ chunk**
```bash
curl -X PUT "http://localhost:8000/api/v1/documents/chunks/123" \
  -F "new_content=ุงููุญุชูู ุงูุฌุฏูุฏ" \
  -F "new_metadata={\"keywords\": [\"ูุงููู\", \"ุนูู\"]}"
```

### 5. **ุญุฐู chunk**
```bash
curl -X DELETE "http://localhost:8000/api/v1/documents/chunks/123"
```

## ๐ง ุงูุฅุนุฏุงุฏุงุช ุงููุทููุจุฉ

### 1. **ูุชุบูุฑุงุช ุงูุจูุฆุฉ**
```env
DATABASE_URL=sqlite+aiosqlite:///./app.db
GEMINI_API_KEY=your-gemini-api-key-here
```

### 2. **ุงูุญุฒู ุงููุทููุจุฉ**
```bash
pip install sqlalchemy chromadb langchain langchain-chroma langchain-huggingface
```

## ๐ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

### ุนูุฏ ุฑูุน ูุซููุฉ JSON:
1. **SQL Database**: 
   - KnowledgeDocument record
   - LawSource record
   - LawArticle records
   - KnowledgeChunk records

2. **Chroma Vectorstore**:
   - ููุณ ุงูู chunks ูุน metadata ุดุงูู
   - embeddings ุฌุงูุฒุฉ ููุจุญุซ ุงูุฏูุงูู

### ุนูุฏ ุงูุจุญุซ:
- ุงูุจุญุซ ูู Chroma ููุญุตูู ุนูู ุงูู chunks ุฐุงุช ุงูุตูุฉ
- ุงุณุชุฎุฏุงู metadata ููุนูุฏุฉ ุฅูู SQL ููุญุตูู ุนูู ุงูุชูุงุตูู ุงููุงููุฉ
- ุฏูุฌ ุงููุชุงุฆุฌ ูู ููุง ุงููุธุงููู

## ๐ฏ ุงูููุงุฆุฏ ุงููุญููุฉ

### โ **ุงูุชุฒุงูู ุงููุงูู**
- ูุง ุชูุฌุฏ ุญุงูุฉ ูุณุทู
- ุฅูุง ูุฌุงุญ ุงูุนูููุฉ ูู ููุง ุงููุธุงููู ุฃู ูุดููุง ูุน rollback

### โ **ุงูุฃุฏุงุก ุงููุญุณู**
- Singleton Pattern ูููุน ุชูุฑุงุฑ ุงูููุงุฐุฌ
- Batch processing ููุนูููุงุช ุงููุจูุฑุฉ
- Persistent storage ูู Chroma

### โ **ุงููุฑููุฉ**
- ูููู ุญุฐู ุฃู ุฌุฏูู ุจุฏูู ูุณุฑ ูุธุงู RAG
- ุชุญุฏูุซ ูุชุนุฏูู ุงููุญุชูู ุจุณูููุฉ
- ูุฒุงููุฉ ูุฏููุฉ ุนูุฏ ุงูุญุงุฌุฉ

### โ **ุงููุงุจููุฉ ููุชูุณุน**
- ุฌุงูุฒ ูุฏุนู ุฃููุงุน ูููุงุช ุฅุถุงููุฉ (PDF, DOCX, TXT)
- ูููู ุฅุถุงูุฉ ููุฒุงุช ุจุญุซ ูุชูุฏูุฉ
- ุฏุนู ูุบุงุช ูุชุนุฏุฏุฉ

## ๐ฎ ุงูุชุทููุฑ ุงููุณุชูุจูู

### ุงููุฑุญูุฉ ุงูุชุงููุฉ:
1. **ุฏุนู PDF**: ุงุณุชุฎุฑุงุฌ ุงููุตูุต ูุชุญููู ุงูุชุฎุทูุท
2. **ุฏุนู DOCX**: ูุนุงูุฌุฉ ูุณุชูุฏุงุช Word
3. **ุฏุนู TXT**: ุชุญููู ุงููุตูุต ุงูุนุงุฏูุฉ
4. **ุจุญุซ ูุฌูู**: ุฏูุฌ ุงูุจุญุซ ุงููุตู ูุงูุฏูุงูู
5. **ุฅุนุงุฏุฉ ุชุฑุชูุจ**: ุชุญุณูู ูุชุงุฆุฌ ุงูุจุญุซ

## ๐ ุงูุฎูุงุตุฉ

ุชู ุชุทููุฑ ูุธุงู ุดุงูู ููุชุทูุฑ ูุฑูุน ููุนุงูุฌุฉ ุงููุซุงุฆู ุงููุงููููุฉ ูุน ุฏุนู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุฒุฏูุฌุฉ. ุงููุธุงู ูุถูู:

- **ุงูุชุฒุงูู ุงููุงูู** ุจูู SQL ู Chroma
- **ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุชูุฏูุฉ** ูุน rollback ุชููุงุฆู  
- **ูุฑููุฉ ูู ุงูุฅุฏุงุฑุฉ** ูุน ุฅููุงููุฉ ุงูุญุฐู ูุงูุชุญุฏูุซ
- **ุฃุฏุงุก ูุญุณู** ุจุงุณุชุฎุฏุงู Singleton Pattern
- **API ุดุงูู** ูุฌููุน ุงูุนูููุงุช
- **ุชูุซูู ููุตู** ูุงุฎุชุจุงุฑุงุช ุดุงููุฉ

**ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูููุฑู ููููู ุชูุณูุนู ุจุณูููุฉ ูุฏุนู ุฃููุงุน ูููุงุช ุฅุถุงููุฉ ูููุฒุงุช ูุชูุฏูุฉ!** ๐
